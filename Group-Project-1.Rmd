---
title: "Group Project 1"
output:
  github_document
date: "2025-09-18"
---

```{r setup, include=FALSE}
# First, ensure the package is installed.
# Uncomment the line below and run it once to install 'readr'.
#install.packages("readr")
knitr::opts_chunk$set(
  echo = FALSE, message = FALSE, warning = FALSE,
  fig.width = 7, fig.height = 4, dpi = 300
)
library(readr)
library(dplyr)
library(ggplot2)
library(lubridate)

# Use the 'read_csv' function to import the data.
# The file "your_file_name.csv" must be in your current working directory,
# or you must provide the full file path.
transportation_data <- read_csv("/Users/mac/Downloads/transportation_data.csv")
temperature_data <- read_csv("/Users/mac/Downloads/temperature_data.csv")
housing_data <- read_csv("/Users/mac/Downloads/housing_data.csv")
environmental_data <- read_csv("/Users/mac/Downloads/environmental_data.csv")
population_data <- read_csv("/Users/mac/Downloads/population_data.csv")
```

```{r}
temp_summary <- temperature_data %>%
  mutate(month_year = format(date, "%m-%Y")) %>%
  group_by(month_year) %>%
  summarise(mean_temperature = mean(temperature, na.rm = TRUE)) %>%
  arrange(month_year)

#temp_summary
```

```{r}
envrm_summary <- environmental_data %>%
  mutate(month_year = format(date, "%m-%Y")) %>%
  group_by(month_year) %>%
  summarise(mean_aqi = mean(aqi, na.rm = TRUE)) %>%
  arrange(month_year)

#envrm_summary
```

```{r}
tran_summary <- transportation_data %>%
  mutate(month_year = format(mdy(date), "%m-%Y")) %>%
  group_by(month_year) %>%
  summarise(
    mean_registered_vehicles = mean(registered_vehicles, na.rm = TRUE),
    mean_transit_ridership  = mean(transit_ridership, na.rm = TRUE)
  ) %>%
  arrange(month_year)

#tran_summary
```

```{r}
ppl_summary <- population_data %>%
    mutate(month_year = format(mdy(date), "%m-%Y")) %>%
    group_by(month_year) %>%
  summarise(
    mean_population_density = mean(population_density, na.rm = TRUE),
    mean_median_income  = mean(median_income, na.rm = TRUE)
  ) %>%
  arrange(month_year)

#ppl_summary
```

```{r}
housing_summary <- housing_data %>% rename(month_year = date)

#housing_summary
```

```{r}
data_summary <- housing_summary %>%
  left_join(temp_summary, by = "month_year") %>%
  left_join(tran_summary, by = "month_year") %>%
  left_join(envrm_summary, by = "month_year") %>%
  left_join(ppl_summary, by = "month_year")

data_summary <- data_summary %>% relocate(month_year, .before = 1)
#data_summary
```



1. Air Quality Trend Over Time? 
Figure 1 presents daily AQI conditions from 2024 into early 2025 and frames the context for subsequent analysis. AQI generally ranges from 70–150 (Moderate to Unhealthy for Sensitive Groups), with a seasonal build from late winter into summer. A brief but severe mid-August excursion above 300 (Very Unhealthy/Hazardous) appears episodic rather than indicative of a new baseline; levels normalize rapidly and remain comparable through autumn and into early 2025. Overall, the series reflects seasonal and event-driven variability without evidence of a persistent upward trend over the period.

```{r}
ggplot(data = environmental_data, aes(x = date, y = aqi)) +
  geom_line(color = "blue", linewidth = 0.5) +
  labs(title = "Air Quality Index Over Time", x = "Month", y = "Air Quality Index") 
```


2. Population Density?
Figure 2 shows a weak positive relationship between monthly mean population density and AQI. While the regression line slopes upward, the points are widely dispersed, and a high-AQI/high-density observation appears influential. Taken together, the evidence suggests at most a weak-to-moderate association. These cross-sectional monthly summaries do not imply causality and may reflect unobserved factors such as meteorology or episodic smoke.

```{r}
ggplot(data_summary, aes(x = mean_population_density, y = mean_aqi)) +
  geom_point(size = 3, alpha = 0.8) +
  geom_smooth(method = "lm", se = FALSE, linewidth = 1) +
  labs(title = "Monthly AQI vs Population Density in 2024", x = "Population Density", y = "Air Quality Index")
```


3. Temperature?
Figure 3 summarizes the association between monthly mean temperature and the AQI. The fitted linear trend is upward, indicating that warmer months are associated with higher AQI, consistent with temperature-driven secondary pollutant formation. Dispersion around the fit is substantial, so the relationship appears moderate rather than strong. Results should be interpreted cautiously given the small monthly sample and potential seasonal confounding.

```{r}
ggplot(data_summary, aes(mean_temperature, mean_aqi)) +
  geom_point(size = 3, alpha = 0.8) +
  geom_smooth(method = "lm", se = FALSE, linewidth = 1) +
  labs(title = "Monthly AQI vs Temperature in 2024", x = "Temperature (°F)", y = "Air Quality Index")
```


4. Vehicle-to-transit Ratio?
Figure 4 demonstrates the association between the vehicle-to-transit ratio and monthly air quality. The fitted linear trend is upward-sloping, indicating that months with greater car reliance tend to register higher AQI levels. However, dispersion around the fit and the presence of a high-ratio/high-AQI observation suggest a moderate relationship that may be sensitive to influential points. This pattern aligns with expectations about on-road emissions but is not causal; concurrent factors such as temperature, seasonal photochemistry, and episodic smoke may confound the association.

```{r}
data_summary <- data_summary %>%
  mutate(vehicle_to_transit_ratio = mean_registered_vehicles/mean_transit_ridership)

ggplot(data_summary, aes(vehicle_to_transit_ratio, mean_aqi)) +
  geom_point(size = 3, alpha = 0.8) +
  geom_smooth(method = "lm", se = FALSE, linewidth = 1) +
  labs(title = "Monthly AQI vs Vehicle-to-transit Ratio in 2024", x = "Vehicle-to-transit Ratio", y = "Air Quality Index")
```


5. Median Income?
Figure 5 indicates a slight positive association between median income and monthly AQI in 2024: the fitted line tilts upward, but the point cloud is diffuse. One or two high-income months with elevated AQI appear influential, so the slope is likely sensitive to those observations. Given the small N and monthly aggregation, this result should be treated as descriptive rather than causal.

```{r}
ggplot(data_summary, aes(mean_median_income, mean_aqi)) +
  geom_point(size = 3, alpha = 0.8) +
  geom_smooth(method = "lm", se = FALSE, linewidth = 1) +
  labs(title = "Monthly AQI vs Median Income in 2024", x = "Median Income ($)", y = "Air Quality Index")
```


6. New Housing Supply?
Figure 6 plots monthly AQI against new housing supply and shows an upward-sloping fitted line, indicating higher AQI in months with more starts. The dispersion around the fit is wide, and a high-supply/high-AQI observation appears influential, so the association is at most moderate and potentially leverage-driven. Because housing starts co-vary with season and macro conditions, and AQI is sensitive to meteorology and episodic smoke, this relationship should be interpreted as descriptive rather than causal as well. 

```{r}
ggplot(data_summary, aes(new_housing_starts, mean_aqi)) +
  geom_point(size = 3, alpha = 0.8) +
  geom_smooth(method = "lm", se = FALSE, linewidth = 1) +
  labs(title = "Monthly AQI vs New Housing Supply in 2024", x = "New Housing Supply", y = "Air Quality Index")
```


7. Conclusion?
Cross-plots show that warmer months are associated with higher AQI, consistent with temperature-driven secondary pollutant formation, while indicators of travel mix (higher vehicle-to-transit ratios) also track higher AQI. By contrast, population density, median income, and new housing starts exhibit only weak, leverage-sensitive associations, suggesting they are not primary drivers of the intra-year pattern. Taken together, the story is one of seasonal accumulation and occasional shocks, not a steady deterioration: AQI rises with heat and specific episodes, then settles back toward typical levels in the fall. Future work should formalize this with multivariable models that control for meteorology and seasonality and include event indicators, to separate persistent trends from transitory spikes.





